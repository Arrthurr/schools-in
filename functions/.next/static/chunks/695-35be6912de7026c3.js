try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="a8cee18a-4ec1-42d4-943c-c0443f15ecb4",e._sentryDebugIdIdentifier="sentry-dbid-a8cee18a-4ec1-42d4-943c-c0443f15ecb4")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[695],{9109:function(e,s,t){t.d(s,{AdminNavigation:function(){return S}});var a=t(57437),n=t(2265),i=t(99376),l=t(27648),r=t(12381),d=t(69174),o=t(44182),c=t(90535),h=t(32489),m=t(93448);let x=o.fC,u=o.xz;o.x8;let f=o.h_,g=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(o.aV,{className:(0,m.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n,ref:s})});g.displayName=o.aV.displayName;let A=(0,c.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),p=n.forwardRef((e,s)=>{let{side:t="right",className:n,children:i,...l}=e;return(0,a.jsxs)(f,{children:[(0,a.jsx)(g,{}),(0,a.jsxs)(o.VY,{ref:s,className:(0,m.cn)(A({side:t}),n),...l,children:[(0,a.jsxs)(o.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]}),i]})]})});p.displayName=o.VY.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(o.Dx,{ref:s,className:(0,m.cn)("text-lg font-semibold text-foreground",t),...n})}).displayName=o.Dx.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(o.dk,{ref:s,className:(0,m.cn)("text-sm text-muted-foreground",t),...n})}).displayName=o.dk.displayName;var j=t(25466),b=t(56096),y=t(48736),N=t(95805),v=t(42488),w=t(98728),C=t(47692),z=t(58293),k=t(94766),B=t(85687),D=t(27638),I=t(79226);let K=[{href:"/admin",label:"Dashboard",icon:j.Z,description:"Overview and statistics"},{href:"/admin/schools",label:"Schools",icon:b.Z,description:"Manage school locations"},{href:"/admin/reports",label:"Reports",icon:y.Z,description:"Session reports and exports"},{href:"/admin/users",label:"Users",icon:N.Z,description:"Manage providers and admins"},{href:"/admin/assignments",label:"Assignments",icon:v.Z,description:"School-provider assignments"},{href:"/admin/settings",label:"Settings",icon:w.Z,description:"System configuration"}];function S(e){var s;let{children:t}=e,{user:o}=(0,B.a)(),c=(0,i.useRouter)(),h=(0,i.usePathname)(),[m,f]=(0,n.useState)(!1),g=async()=>{await (0,D.ni)(),c.push("/")},A=e=>"/admin"===e?"/admin"===h:h.startsWith(e),j=()=>(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex items-center px-6 py-4 border-b",children:(0,a.jsxs)(l.default,{href:"/admin",className:"flex items-center space-x-2",children:[(0,a.jsx)(I.m,{size:"sm",showText:!1,priority:!0}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Schools In"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Admin Panel"})]})]})}),(0,a.jsx)("nav",{className:"flex-1 px-3 py-4 space-y-1",children:K.map(e=>{let s=e.icon,t=A(e.href);return(0,a.jsxs)(l.default,{href:e.href,className:"\n                flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors\n                ".concat(t?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted","\n              "),onClick:()=>f(!1),children:[(0,a.jsx)(s,{className:"h-4 w-4 mr-3"}),e.label,e.badge&&(0,a.jsx)(d.C,{variant:"secondary",className:"ml-auto",children:e.badge})]},e.href)})}),(0,a.jsx)("div",{className:"px-3 py-4 border-t",children:(0,a.jsxs)("div",{className:"flex items-center px-3 py-2 rounded-lg bg-muted",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:(null==o?void 0:o.displayName)||(null==o?void 0:o.email)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Administrator"})]}),(0,a.jsx)(r.z,{variant:"ghost",size:"sm",onClick:g,className:"h-8 w-8 p-0",children:(0,a.jsx)(C.Z,{className:"h-4 w-4"})})]})})]});return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"hidden lg:flex lg:w-64 lg:flex-col lg:fixed lg:inset-y-0 lg:bg-card lg:border-r",children:(0,a.jsx)(j,{})}),(0,a.jsxs)(x,{open:m,onOpenChange:f,children:[(0,a.jsx)(u,{asChild:!0,children:(0,a.jsx)(r.z,{variant:"ghost",size:"sm",className:"lg:hidden fixed top-4 left-4 z-40",children:(0,a.jsx)(z.Z,{className:"h-5 w-5"})})}),(0,a.jsx)(p,{side:"left",className:"w-64 p-0",children:(0,a.jsx)(j,{})})]}),(0,a.jsxs)("div",{className:"lg:pl-64",children:[(0,a.jsx)("header",{className:"bg-card border-b px-4 py-3 lg:px-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(r.z,{variant:"ghost",size:"sm",className:"lg:hidden",onClick:()=>f(!0),children:(0,a.jsx)(z.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"hidden sm:flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,a.jsx)(l.default,{href:"/admin",className:"hover:text-foreground",children:"Admin"}),"/admin"!==h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"/"}),(0,a.jsx)("span",{className:"text-foreground",children:(null===(s=K.find(e=>h.startsWith(e.href)&&"/admin"!==e.href))||void 0===s?void 0:s.label)||"Page"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(r.z,{variant:"ghost",size:"sm",children:(0,a.jsx)(k.Z,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"hidden sm:flex items-center space-x-2 pl-2 border-l",children:(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:(null==o?void 0:o.displayName)||(null==o?void 0:o.email)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Administrator"})]})})]})]})}),(0,a.jsx)("main",{className:"p-4 lg:p-6",children:t})]})]})}},53002:function(e,s,t){t.d(s,{ProtectedRoute:function(){return l}});var a=t(57437),n=t(85687),i=t(99376);function l(e){let{children:s,roles:t}=e,{user:l,loading:r}=(0,n.a)(),d=(0,i.useRouter)();return r?(0,a.jsx)("div",{children:"Loading..."}):l?l.role&&!t.includes(l.role)?(d.push("/dashboard"),null):(0,a.jsx)(a.Fragment,{children:s}):(d.push("/"),null)}},79226:function(e,s,t){t.d(s,{T:function(){return d},m:function(){return r}});var a=t(57437);t(2265);var n=t(93448),i=t(78584);let l={sm:{width:32,height:32,textSize:"text-lg"},md:{width:48,height:48,textSize:"text-xl"},lg:{width:64,height:64,textSize:"text-2xl"},xl:{width:96,height:96,textSize:"text-3xl"}};function r(e){let{size:s="md",className:t,priority:r=!1,showText:d=!0}=e,{width:o,height:c,textSize:h}=l[s];return(0,a.jsxs)("div",{className:(0,n.cn)("flex items-center gap-3",t),children:[(0,a.jsx)(i.OptimizedImage,{src:"/DMDL_logo.png",alt:"DMDL Schools-In Logo",width:o,height:c,priority:r,quality:90,className:"object-contain",loading:r?"eager":"lazy"}),d&&(0,a.jsx)("span",{className:(0,n.cn)("font-bold text-brand-primary",h),children:"Schools-In"})]})}function d(e){let{title:s,subtitle:t,className:i}=e;return(0,a.jsxs)("div",{className:(0,n.cn)("text-center space-y-4",i),children:[(0,a.jsx)(r,{size:"xl",className:"justify-center"}),s&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900",children:s}),t&&(0,a.jsx)("p",{className:"text-muted-foreground text-sm sm:text-base",children:t})]})]})}},78584:function(e,s,t){t.d(s,{OptimizedImage:function(){return d},X:function(){return o}});var a=t(57437),n=t(2265),i=t(33145),l=t(93448),r=t(69140);function d(e){let{src:s,alt:t,width:d,height:o,priority:c=!1,quality:h=75,placeholder:m="empty",blurDataURL:x,sizes:u,fill:f=!1,className:g,fallback:A,loading:p="lazy",onLoad:j,onError:b}=e,[y,N]=(0,n.useState)(!1),[v,w]=(0,n.useState)(!1),C=(0,n.useCallback)(()=>{N(!0),null==j||j()},[j]),z=(0,n.useCallback)(()=>{w(!0),null==b||b()},[b]);return v&&A?(0,a.jsx)(a.Fragment,{children:A}):v?(0,a.jsx)("div",{className:(0,l.cn)("flex items-center justify-center bg-gray-100 text-gray-400",g),style:{width:f?"100%":d,height:f?"100%":o},children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}):(0,a.jsxs)("div",{className:(0,l.cn)("relative",g),children:[!y&&(0,a.jsx)("div",{className:"absolute inset-0 z-10",children:(0,a.jsx)(r.Od,{className:(0,l.cn)("w-full h-full",{"absolute inset-0":f}),style:{width:f?"100%":d,height:f?"100%":o}})}),(0,a.jsx)(i.default,{src:s,alt:t,width:f?void 0:d,height:f?void 0:o,fill:f,priority:c,quality:h,placeholder:m,blurDataURL:x,sizes:u,loading:p,className:(0,l.cn)("transition-opacity duration-200",y?"opacity-100":"opacity-0"),onLoad:C,onError:z})]})}function o(e){let{src:s,alt:t,size:n=40,className:i,fallback:r}=e,o=(0,a.jsx)("div",{className:(0,l.cn)("rounded-full bg-gray-300 flex items-center justify-center text-gray-600",i),style:{width:n,height:n},children:(0,a.jsx)("svg",{className:"w-1/2 h-1/2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"})})});return(0,a.jsx)(d,{src:s,alt:t,width:n,height:n,className:(0,l.cn)("rounded-full",i),quality:85,placeholder:"blur",blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyLhxEDnGFELMO4==",fallback:r||o})}},27638:function(e,s,t){t.d(s,{Ry:function(){return l},ni:function(){return o},o1:function(){return r},qj:function(){return d}});var a=t(82148),n=t(50237);let i=new a.hJ,l=async(e,s)=>await (0,a.e5)(n.I8,e,s),r=async(e,s)=>await (0,a.Xb)(n.I8,e,s),d=async()=>await (0,a.rh)(n.I8,i),o=async()=>await (0,a.w7)(n.I8)}}]);