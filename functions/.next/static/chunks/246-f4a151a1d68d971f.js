try{!function(){const e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="beacaec4-eb68-4572-823e-eb3e6ffefdf6",e._sentryDebugIdIdentifier="sentry-dbid-beacaec4-eb68-4572-823e-eb3e6ffefdf6")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{53002:function(e,t,s){s.d(t,{ProtectedRoute:function(){return i}});const a=s(57437),n=s(85687),l=s(99376);function i(e){let{children:t,roles:s}=e,{user:i,loading:o}=(0,n.a)(),r=(0,l.useRouter)();return o?(0,a.jsx)("div",{children:"Loading..."}):i?i.role&&!s.includes(i.role)?(r.push("/dashboard"),null):(0,a.jsx)(a.Fragment,{children:t}):(r.push("/"),null)}},2662:function(e,t,s){s.d(t,{c:function(){return S}});const a=s(57437),n=s(2265),l=s(85687),i=s(15926),o=s(1469),r=s(53943),c=s(79820),d=s(12381),u=s(40279),h=s(69174),m=s(41671),g=s(49322),f=s(56096),x=s(77877),y=s(73247),p=s(83774),b=s(91723),j=s(69140),N=s(54761),w=s(15804),v=s(67205);const S=e=>{let{onSchoolSelect:t,onSchoolDetail:s,showCheckInButtons:S=!1,showDetailButtons:C=!0,className:A=""}=e,{user:k}=(0,l.a)(),{location:E,loading:Z,getLocation:T}=(0,i.T)(),{trackLocationLoadTime:M,trackSearch:P,trackError:L}=(0,o.z)(),[I,D]=(0,n.useState)([]),[_,z]=(0,n.useState)([]),[G,R]=(0,n.useState)(!0),[F,Y]=(0,n.useState)(""),[W,H]=(0,n.useState)(null),{announce:q}=(0,v.qg)(),O=(0,n.useId)();(0,n.useEffect)(()=>{(async()=>{if(!(null==k?void 0:k.uid))return;const e=performance.now();R(!0),H(null);try{const t=await r.E.getAssignedSchools(k.uid),s=performance.now()-e;M(s),D(t),z(t),q("".concat(t.length," assigned schools loaded"),"polite")}catch(a){const t=performance.now()-e;console.error("Error loading schools:",a);const s="Failed to load schools. Please try again.";L(Error("Failed to load schools"),{user_id:k.uid,load_time:t,error_message:a instanceof Error?a.message:"Unknown error"},"high"),H(s),q("Error: ".concat(s),"assertive")}finally{R(!1)}})()},[null==k?void 0:k.uid,M,L,q]),(0,n.useEffect)(()=>{(async()=>{if(E&&(null==k?void 0:k.uid))try{const e=await r.E.getSchoolsWithDistance(E.latitude,E.longitude,k.uid);if(D(e),F.trim()){const t=(await r.E.searchSchools(F,k.uid)).map(t=>e.find(e=>e.id===t.id)||t);z(t)}else z(e)}catch(e){console.error("Error updating schools with distance:",e)}})()},[E,null==k?void 0:k.uid,F]),(0,n.useEffect)(()=>{const e=setTimeout(async()=>{if(!(null==k?void 0:k.uid))return;const e=performance.now();try{const t=await r.E.searchSchools(F,k.uid),s=performance.now()-e;F.trim()&&P(F,"locations",{count:t.length,loadTime:s,fromCache:!1}),z(t),F.trim()&&q("".concat(t.length,' schools found for "').concat(F,'"'),"polite")}catch(s){const t=performance.now()-e;console.error("Error filtering schools:",s),L(Error("Search failed"),{search_query:F,search_time:t,user_id:k.uid},"medium"),q("Error filtering schools","assertive")}},300);return()=>clearTimeout(e)},[F,null==k?void 0:k.uid,P,L,q]);const B=e=>"number"!=typeof e?"":e<1e3?"".concat(Math.round(e),"m"):"".concat((e/1e3).toFixed(1),"km"),K=e=>E&&"number"==typeof e.distance?r.E.isWithinRadius(E.latitude,E.longitude,e)?(0,a.jsxs)(h.C,{variant:"secondary",className:"bg-green-100 text-green-700 border-green-200",children:[(0,a.jsx)(m.Z,{className:"w-3 h-3 mr-1"}),"In Range"]}):(0,a.jsxs)(h.C,{variant:"secondary",className:"bg-yellow-100 text-yellow-700 border-yellow-200",children:[(0,a.jsx)(g.Z,{className:"w-3 h-3 mr-1"}),"Out of Range"]}):null,V=e=>{t&&t(e)},U=(e,t)=>{t.stopPropagation(),s&&s(e)};return G?(0,a.jsxs)(c.Zb,{className:A,children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsxs)(c.ll,{className:"flex items-center",children:[(0,a.jsx)(f.Z,{className:"mr-2 h-5 w-5"}),"Assigned Schools"]}),(0,a.jsx)(c.SZ,{children:"Loading your school assignments..."})]}),(0,a.jsx)(c.aY,{className:"space-y-4",children:(0,a.jsx)(j.eM,{items:3,showAvatar:!1})})]}):W?(0,a.jsx)(w.Te,{type:"generic",title:"Failed to load schools",message:W,onAction:()=>window.location.reload(),actionLabel:"Reload",className:A}):0===I.length?(0,a.jsx)(w.ub,{type:"schools",title:"No schools assigned",message:"You don't have any schools assigned yet. Contact your administrator to get access to schools.",actionLabel:"Contact Support",onAction:()=>window.open("mailto:support@example.com","_blank"),className:A}):(0,a.jsxs)(c.Zb,{className:A,children:[(0,a.jsxs)(c.Ol,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsxs)(c.ll,{className:"flex items-center text-lg sm:text-xl",children:[(0,a.jsx)(f.Z,{className:"mr-2 h-5 w-5 flex-shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:"Assigned Schools"})]}),(0,a.jsxs)(c.SZ,{className:"mt-1",children:[I.length," school",1!==I.length?"s":""," assigned",E&&(0,a.jsxs)("span",{className:"inline-flex items-center ml-2",children:[(0,a.jsxs)("span",{className:"hidden sm:inline",children:[" ","â€¢ Location services active"]}),(0,a.jsx)(m.Z,{className:"h-4 w-4 ml-1 text-green-600 sm:hidden"})]})]})]}),!E&&(0,a.jsxs)(d.z,{onClick:T,disabled:Z,size:"sm",variant:"outline",className:"touch-target flex-shrink-0 w-full sm:w-auto micro-scale","aria-label":Z?"Getting your location...":"Enable location services to see distances to schools",children:[Z?(0,a.jsx)(N.TK,{size:"sm",variant:"secondary"}):(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),(0,a.jsx)("span",{className:"sm:hidden",children:Z?"Getting Location...":"Enable Location"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:Z?"Getting...":"Get Location"})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{htmlFor:O,className:"sr-only",children:"Search schools"}),(0,a.jsx)(y.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400","aria-hidden":"true"}),(0,a.jsx)(u.I,{id:O,placeholder:"Search schools...",value:F,onChange:e=>Y(e.target.value),className:"pl-10 touch-target text-base sm:text-sm","aria-label":"Search schools by name or location","aria-describedby":_.length>0?"".concat(O,"-results"):void 0}),(0,a.jsx)(v.uy,{children:(0,a.jsx)("div",{id:"".concat(O,"-results"),"aria-live":"polite",children:F&&"".concat(_.length," schools found")})})]})]}),(0,a.jsxs)(c.aY,{children:[(0,a.jsx)("div",{className:"space-y-3",children:0===_.length&&F?(0,a.jsx)(w.ub,{type:"search",title:"No schools found",message:'No schools match "'.concat(F,'". Try adjusting your search terms.'),actionLabel:"Clear Search",onAction:()=>Y(""),showAction:!0}):_.map((e,s)=>(0,a.jsx)("div",{className:"p-4 sm:p-5 border rounded-lg transition-colors ".concat(t?"cursor-pointer hover:bg-gray-50 hover:border-brand-primary active:bg-gray-100":""),onClick:()=>V(e),role:t?"button":"article",tabIndex:t?0:void 0,"aria-label":t?"Select ".concat(e.name):void 0,onKeyDown:s=>{t&&("Enter"===s.key||" "===s.key)&&(s.preventDefault(),V(e))},children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 text-base sm:text-lg truncate",children:e.name}),K(e)]}),(0,a.jsxs)("div",{className:"flex items-start text-sm text-gray-600 mb-3",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0","aria-hidden":"true"}),(0,a.jsx)("span",{className:"break-words",children:e.address||"Address not available"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm text-gray-500",children:["number"==typeof e.distance&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-1 flex-shrink-0"}),(0,a.jsxs)("span",{children:[B(e.distance)," away"]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-1 flex-shrink-0"}),(0,a.jsxs)("span",{children:[e.radius||100,"m radius"]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:ml-4 w-full sm:w-auto",children:[C&&(0,a.jsxs)(d.z,{size:"sm",variant:"outline",onClick:t=>U(e,t),className:"touch-target w-full sm:w-auto",children:[(0,a.jsx)("span",{className:"sm:hidden",children:"Details"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"View Details"})]}),S&&(0,a.jsxs)(d.z,{size:"sm",disabled:!E||"number"==typeof e.distance&&!r.E.isWithinRadius((null==E?void 0:E.latitude)||0,(null==E?void 0:E.longitude)||0,e),className:"btn-brand-primary touch-target w-full sm:w-auto",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Check In"]})]})]})},e.id))}),_.length>0&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["Showing ",_.length," of ",I.length," school",1!==I.length?"s":""]}),E&&(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-1 text-green-600"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Location active"}),(0,a.jsx)("span",{className:"sm:hidden",children:"GPS active"})]})]})})]})]})}},15804:function(e,t,s){s.d(t,{DE:function(){return b},Te:function(){return x},XE:function(){return p},ub:function(){return y}});const a=s(57437);s(2265);const n=s(75395),l=s(49322),i=s(83774),o=s(82431),r=s(56096),c=s(91723),d=s(95805),u=s(73247),h=s(48736),m=s(12381),g=s(95937),f=s(79820);function x(e){let{title:t,message:s,actionLabel:r="Try Again",onAction:c,type:d="generic",showRetry:u=!0,className:h=""}=e,g=(()=>{switch(d){case"network":return{icon:n.Z,defaultTitle:"Connection Error",defaultMessage:"Unable to connect to the server. Please check your internet connection and try again.",iconColor:"text-red-500"};case"auth":return{icon:l.Z,defaultTitle:"Authentication Error",defaultMessage:"You need to be signed in to access this feature. Please sign in and try again.",iconColor:"text-orange-500"};case"location":return{icon:i.Z,defaultTitle:"Location Error",defaultMessage:"Unable to access your location. Please enable location services and try again.",iconColor:"text-blue-500"};case"permission":return{icon:l.Z,defaultTitle:"Permission Denied",defaultMessage:"You don't have permission to access this feature. Please contact your administrator.",iconColor:"text-red-500"};default:return{icon:l.Z,defaultTitle:"Something went wrong",defaultMessage:"An unexpected error occurred. Please try again.",iconColor:"text-red-500"}}})(),x=g.icon;return(0,a.jsx)(f.Zb,{className:"text-center ".concat(h),children:(0,a.jsx)(f.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)(x,{className:"h-12 w-12 ".concat(g.iconColor)}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t||g.defaultTitle}),(0,a.jsx)("p",{className:"text-sm text-gray-600 max-w-sm",children:s||g.defaultMessage})]}),u&&c&&(0,a.jsxs)(m.z,{onClick:c,variant:"outline",className:"mt-4",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),r]})]})})})}function y(e){let{title:t,message:s,actionLabel:n="Get Started",onAction:l,type:i="generic",showAction:o=!0,className:g=""}=e,x=(()=>{switch(i){case"schools":return{icon:r.Z,defaultTitle:"No schools assigned",defaultMessage:"You don't have any schools assigned yet. Contact your administrator to get started.",defaultAction:"Contact Support",iconColor:"text-blue-500"};case"sessions":return{icon:c.Z,defaultTitle:"No sessions found",defaultMessage:"No check-in sessions have been recorded yet. Start your first session to see it here.",defaultAction:"Start Session",iconColor:"text-green-500"};case"users":return{icon:d.Z,defaultTitle:"No users found",defaultMessage:"No users match your current filters. Try adjusting your search criteria.",defaultAction:"Clear Filters",iconColor:"text-purple-500"};case"search":return{icon:u.Z,defaultTitle:"No results found",defaultMessage:"We couldn't find anything matching your search. Try different keywords or check your spelling.",defaultAction:"Clear Search",iconColor:"text-gray-500"};case"assignments":return{icon:h.Z,defaultTitle:"No assignments",defaultMessage:"No assignments have been created yet. Create your first assignment to get started.",defaultAction:"Create Assignment",iconColor:"text-indigo-500"};case"reports":return{icon:h.Z,defaultTitle:"No reports available",defaultMessage:"No reports are available for the selected criteria. Try adjusting your filters.",defaultAction:"Clear Filters",iconColor:"text-orange-500"};default:return{icon:h.Z,defaultTitle:"Nothing here yet",defaultMessage:"This section is empty. Start by adding some content.",defaultAction:"Get Started",iconColor:"text-gray-500"}}})(),y=x.icon;return(0,a.jsx)(f.Zb,{className:"text-center ".concat(g),children:(0,a.jsx)(f.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)(y,{className:"h-12 w-12 ".concat(x.iconColor)}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t||x.defaultTitle}),(0,a.jsx)("p",{className:"text-sm text-gray-600 max-w-sm",children:s||x.defaultMessage})]}),o&&l&&(0,a.jsx)(m.z,{onClick:l,className:"mt-4",children:n||x.defaultAction})]})})})}function p(e){const{message:t="Something went wrong",onRetry:s,className:n=""}=e;return(0,a.jsxs)(g.bZ,{variant:"destructive",className:n,children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),(0,a.jsx)(g.Cd,{children:"Error"}),(0,a.jsxs)(g.X,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:t}),s&&(0,a.jsxs)(m.z,{variant:"outline",size:"sm",onClick:s,className:"ml-2 h-7",children:[(0,a.jsx)(o.Z,{className:"h-3 w-3 mr-1"}),"Retry"]})]})]})}function b(e){const{message:t="Nothing to show",className:s=""}=e;return(0,a.jsx)("div",{className:"text-center py-8 text-gray-500 ".concat(s),children:(0,a.jsx)("p",{className:"text-sm",children:t})})}},40279:function(e,t,s){s.d(t,{I:function(){return i}});const a=s(57437),n=s(2265),l=s(93448);const i=n.forwardRef((e,t)=>{const{className:s,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"},54761:function(e,t,s){s.d(t,{TK:function(){return i},fl:function(){return o}});const a=s(57437);s(2265);const n=s(93448),l=s(51817);function i(e){let{size:t="md",variant:s="primary",showText:i=!1,text:o="Loading...",className:r,...c}=e,d={primary:"text-brand-primary",secondary:"text-muted-foreground",muted:"text-gray-400"};return(0,a.jsxs)("div",{className:(0,n.cn)("flex items-center justify-center",i&&"space-x-2",r),...c,children:[(0,a.jsx)(l.Z,{className:(0,n.cn)("animate-spin",{sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"}[t],d[s])}),i&&(0,a.jsx)("span",{className:(0,n.cn)("font-medium",{sm:"text-sm",md:"text-base",lg:"text-lg"}[t],d[s]),children:o})]})}function o(e){const{isLoading:t,children:s,loadingText:l,className:o,disabled:r,size:c="md",variant:d="default",...u}=e;return(0,a.jsxs)("button",{className:(0,n.cn)({default:"btn-brand-primary",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-brand-primary underline-offset-4 hover:underline"}[d],"relative flex items-center justify-center","transition-all duration-200","disabled:opacity-50 disabled:cursor-not-allowed",t&&"cursor-not-allowed",o),disabled:r||t,...u,children:[t&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(i,{size:"sm"===c?"sm":"lg"===c?"md":"sm",variant:"secondary",showText:!!l,text:l})}),(0,a.jsx)("span",{className:(0,n.cn)("transition-opacity duration-200",t?"opacity-0":"opacity-100"),children:s})]})}},15926:function(e,t,s){s.d(t,{T:function(){return o}});const a=s(2265);const n=(e,t,s)=>{navigator.geolocation.getCurrentPosition(e,t,s)},l={getCurrentLocation:e=>new Promise((t,s)=>{if(!navigator.geolocation){s({code:0,message:"Geolocation is not supported by this browser"});return}n(e=>{t({latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy})},e=>{s({code:e.code,message:i(e.code)})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4,...e})})},i=e=>{switch(e){case 1:return"Location access denied. Please enable location permissions.";case 2:return"Location unavailable. Please check your GPS settings.";case 3:return"Location request timed out. Please try again.";default:return"An unknown location error occurred."}},o=()=>{const[e,t]=(0,a.useState)(null),[s,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)(null);return{location:e,loading:s,error:i,getLocation:async()=>{n(!0),o(null);try{const e=await l.getCurrentLocation();t(e)}catch(e){o(e),t(null)}finally{n(!1)}},clearError:(0,a.useCallback)(()=>{o(null)},[])}}},53943:function(e,t,s){s.d(t,{E:function(){return l}});const a=[{name:"Walter Payton HS",latitude:41.90191443941818,longitude:-87.63472443763325},{name:"Estrella Foothills HS",latitude:33.32774730573383,longitude:-112.42321335568697},{name:"Augustus Tolton",latitude:41.758053594905924,longitude:-87.61082755311055},{name:"Bethesda International Academy",latitude:42.009123647694,longitude:-87.63274729304545},{name:"Cambridge School",latitude:41.81239483239481,longitude:-87.59650712631131},{name:"Chicago SDA Academy",latitude:41.7720688903756,longitude:-87.66943795996532},{name:"Chicago West Side Christian School",latitude:41.88298993613497,longitude:-87.72200785016952},{name:"Children of Peace Catholic School",latitude:41.86620678370595,longitude:-87.68791329791728},{name:"Daystar Academy",latitude:41.86988548410223,longitude:-87.57461735669517},{name:"DePaul College Prep",latitude:41.94556292997298,longitude:-87.66897039985464},{name:"Good Shepherd Catholic School",latitude:41.79038457319608,longitude:-87.61852882493487},{name:"Heritage Leadership Academy",latitude:41.69418980316117,longitude:-87.64041011233861},{name:"Holy Angels Catholic School",latitude:41.82452120447666,longitude:-87.62574790138426},{name:"HOPE Excel Academy",latitude:41.89489643826383,longitude:-87.74549042314361},{name:"ICCI Academy",latitude:41.946599346578196,longitude:-87.84449809034912},{name:"ITA Village Leadership Academy",latitude:41.81040593002731,longitude:-87.62672967311518},{name:"LYDIA Home",latitude:41.958698147522966,longitude:-87.71297429733272},{name:"Makki Educational Academy",latitude:41.989645326938415,longitude:-87.71231955385213},{name:"Mercy School for Boys",latitude:41.884398518323565,longitude:-87.64727650010171},{name:"Mercy School for Girls",latitude:41.884398518323565,longitude:-87.64727650010171},{name:"Oakdale Christian Academy",latitude:41.73076656266556,longitude:-87.64951378822167},{name:"Ravenswood Baptist Christian",latitude:41.96342476422094,longitude:-87.6792012118811},{name:"St. Ailbe School",latitude:41.733963943348805,longitude:-87.60463832507088},{name:"St. Katharine - Drexel Catholic School",latitude:41.73788198295598,longitude:-87.56671196475762},{name:"St. John's Lutheran School",latitude:41.96368428829383,longitude:-87.7800006332083},{name:"St. Margaret of Scotland School",latitude:41.71704149043431,longitude:-87.67381145357817},{name:"St. Paul Lutheran School",latitude:41.75478591099567,longitude:-87.58372602978359},{name:"St. Philip Neri School",latitude:41.79231990661875,longitude:-87.58304443755415},{name:"St. Sabina Academy",latitude:41.76041917658477,longitude:-87.69943544658119},{name:"St. Viator Elementary School",latitude:41.946667823924905,longitude:-87.73031274614014},{name:"Visitation Catholic School",latitude:41.79280915614653,longitude:-87.64731241877288}],n=()=>a.map((e,t)=>({id:"school-".concat(t+1),name:e.name,latitude:e.latitude,longitude:e.longitude,address:"".concat(e.name," Location"),radius:100,isAssigned:!1}));class l{static async getAllSchools(){return this.schools||(this.schools=n()),[...this.schools]}static async getAssignedSchools(e){const t=await this.getAllSchools(),s=["school-1","school-2","school-3"];return t.filter(e=>s.includes(e.id)).map(e=>({...e,isAssigned:!0}))}static async getSchoolById(e){return(await this.getAllSchools()).find(t=>t.id===e)||null}static calculateDistance(e,t,s,a){const n=(s-e)*Math.PI/180,l=(a-t)*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371e3}static isWithinRadius(e,t,s){return this.calculateDistance(e,t,s.latitude,s.longitude)<=(s.radius||100)}static async getSchoolsWithDistance(e,t,s){return(await this.getAssignedSchools(s)).map(s=>({...s,distance:this.calculateDistance(e,t,s.latitude,s.longitude)})).sort((e,t)=>(e.distance||0)-(t.distance||0))}static async searchSchools(e,t){const s=t?await this.getAssignedSchools(t):await this.getAllSchools();if(!e.trim())return s;const a=e.toLowerCase();return s.filter(e=>e.name.toLowerCase().includes(a))}}l.schools=null}}]);