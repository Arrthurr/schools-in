try{!function(){const e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="d1262c31-e97d-4f9c-9d35-1f75e6f85985",e._sentryDebugIdIdentifier="sentry-dbid-d1262c31-e97d-4f9c-9d35-1f75e6f85985")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{30967:function(e,s,a){Promise.resolve().then(a.bind(a,40091))},15868:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});const t=(0,a(79205).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},18930:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});const t=(0,a(79205).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},49663:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});const t=(0,a(79205).Z)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},40091:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return _}});const t=a(57437),r=a(2265),l=a(78584),i=a(37806),n=a(73247),d=a(92735),c=a(49663);const o=(0,a(79205).Z)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);const m=a(18930),u=a(70933),h=a(61094),x=a(95805),v=a(89345),g=a(31047),p=a(15868),y=a(12381),j=a(40279),f=a(79820),N=a(69174),b=a(95937),w=a(53002),S=a(9109),A=a(74291),k=a(32489),E=a(15804),U=a(5978),C=a(50237),z=a(73634);const Z=async e=>{try{let s=(0,U.IO)((0,U.hJ)(C.db,z.Ul.USERS),(0,U.Xo)("createdAt","desc"));return(null==e?void 0:e.role)&&(s=(0,U.IO)(s,(0,U.ar)("role","==",e.role))),(null==e?void 0:e.isActive)!==void 0&&(s=(0,U.IO)(s,(0,U.ar)("isActive","==",e.isActive))),(await (0,U.PL)(s)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("Error getting users:",e),Error("Failed to fetch users")}},L=async(e,s)=>{try{const a=(0,U.JU)(C.db,z.Ul.USERS,e);await (0,U.r7)(a,{role:s,updatedAt:U.EK.now()})}catch(e){throw console.error("Error updating user role:",e),Error("Failed to update user role")}},D=async(e,s)=>{try{const a=(0,U.JU)(C.db,z.Ul.USERS,e);await (0,U.r7)(a,{isActive:s,updatedAt:U.EK.now()})}catch(e){throw console.error("Error updating user status:",e),Error("Failed to update user status")}},I=async(e,s)=>{try{const a=(0,U.JU)(C.db,z.Ul.USERS,e);await (0,U.r7)(a,{...s,updatedAt:U.EK.now()})}catch(e){throw console.error("Error updating user profile:",e),Error("Failed to update user profile")}},R=async(e,s)=>{try{const a=(0,U.qs)(C.db),t=U.EK.now();e.forEach(e=>{const r=(0,U.JU)(C.db,z.Ul.USERS,e);a.update(r,{isActive:s,updatedAt:t})}),await a.commit()}catch(e){throw console.error("Error bulk updating user status:",e),Error("Failed to bulk update user status")}},F=async e=>{try{const s=(0,U.qs)(C.db);e.forEach(e=>{const a=(0,U.JU)(C.db,z.Ul.USERS,e);s.delete(a)}),await s.commit()}catch(e){throw console.error("Error bulk deleting users:",e),Error("Failed to bulk delete users")}},P=async()=>{try{const e=(await (0,U.PL)((0,U.hJ)(C.db,z.Ul.USERS))).docs.map(e=>e.data());return{totalUsers:e.length,totalProviders:e.filter(e=>"provider"===e.role).length,totalAdmins:e.filter(e=>"admin"===e.role).length,activeUsers:e.filter(e=>e.isActive).length,inactiveUsers:e.filter(e=>!e.isActive).length}}catch(e){throw console.error("Error getting user stats:",e),Error("Failed to fetch user statistics")}},M=async e=>{try{const s=(await (0,U.PL)((0,U.hJ)(C.db,z.Ul.USERS))).docs.map(e=>({id:e.id,...e.data()})),a=e.toLowerCase();return s.filter(e=>{let s,t;return(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(a))||(null===(t=e.displayName)||void 0===t?void 0:t.toLowerCase().includes(a))})}catch(e){throw console.error("Error searching users:",e),Error("Failed to search users")}};function O(e){let{user:s,isOpen:a,onClose:l,onSave:i,mode:n}=e,[d,c]=(0,r.useState)([]),[o,m]=(0,r.useState)(!1),[u,h]=(0,r.useState)({displayName:"",email:"",role:"provider",isActive:!0,assignedSchools:[]});(0,r.useEffect)(()=>{x()},[]),(0,r.useEffect)(()=>{s&&"edit"===n?h({displayName:s.displayName||"",email:s.email||"",role:s.role,isActive:s.isActive,assignedSchools:s.assignedSchools||[]}):"create"===n&&h({displayName:"",email:"",role:"provider",isActive:!0,assignedSchools:[]})},[s,n]);const x=async()=>{try{c([{id:"1",name:"Walter Payton HS",address:"1034 N Wells St",isActive:!0},{id:"2",name:"Estrella Foothills HS",address:"18315 W Lower Buckeye Rd",isActive:!0},{id:"3",name:"Augustus Tolton",address:"1729 S Ashland Ave",isActive:!0},{id:"4",name:"Cambridge School",address:"1047 W 47th St",isActive:!0},{id:"5",name:"Chicago SDA Academy",address:"7347 S Emerald Ave",isActive:!1}])}catch(e){console.error("Error loading schools:",e)}},v=e=>{const s=u.assignedSchools.includes(e)?u.assignedSchools.filter(s=>s!==e):[...u.assignedSchools,e];h(e=>({...e,assignedSchools:s}))},g=async e=>{e.preventDefault();try{m(!0),"edit"===n&&s?await I(s.id,u):console.log("Creating user:",u),i(),l()}catch(e){console.error("Error saving user:",e)}finally{m(!1)}},p=e=>{const s=d.find(s=>s.id===e);return(null==s?void 0:s.name)||e};return(0,t.jsx)(A.Vq,{open:a,onOpenChange:l,children:(0,t.jsxs)(A.cZ,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(A.fK,{children:[(0,t.jsx)(A.$N,{children:"create"===n?"Create New User":"Edit ".concat((null==s?void 0:s.displayName)||"User")}),(0,t.jsx)(A.Be,{children:"create"===n?"Add a new user to the system and assign their role.":"Update user information and role assignments."})]}),(0,t.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name"}),(0,t.jsx)(j.I,{placeholder:"Enter full name",value:u.displayName,onChange:e=>h(s=>({...s,displayName:e.target.value})),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,t.jsx)(j.I,{type:"email",placeholder:"user@example.com",value:u.email,onChange:e=>h(s=>({...s,email:e.target.value})),disabled:"edit"===n,required:!0}),"edit"===n&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed after user creation"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,t.jsxs)("select",{value:u.role,onChange:e=>h(s=>({...s,role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,t.jsx)("option",{value:"provider",children:"Provider"}),(0,t.jsx)("option",{value:"admin",children:"Admin"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"admin"===u.role?"Full system access and management capabilities":"Access to assigned schools and check-in/out functionality"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-4 border rounded-lg",children:[(0,t.jsx)("input",{type:"checkbox",checked:u.isActive,onChange:e=>h(s=>({...s,isActive:e.target.checked})),className:"rounded border-gray-300 text-brand-primary focus:ring-brand-primary"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Active User"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Inactive users cannot sign in to the system"})]})]})]}),"provider"===u.role&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Assigned Schools"}),u.assignedSchools.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Selected schools (",u.assignedSchools.length,"):"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:u.assignedSchools.map(e=>(0,t.jsxs)(N.C,{variant:"secondary",className:"pr-1",children:[p(e),(0,t.jsx)(y.z,{type:"button",variant:"ghost",size:"sm",className:"h-auto p-1 ml-2",onClick:()=>v(e),children:(0,t.jsx)(k.Z,{className:"h-3 w-3"})})]},e))})]}),(0,t.jsxs)("div",{className:"border rounded-lg p-4 max-h-40 overflow-y-auto",children:[(0,t.jsx)("p",{className:"text-sm font-medium mb-3",children:"Available Schools:"}),(0,t.jsx)("div",{className:"space-y-2",children:d.filter(e=>e.isActive).map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:e.id,checked:u.assignedSchools.includes(e.id),onChange:()=>v(e.id),className:"rounded border-gray-300 text-brand-primary focus:ring-brand-primary"}),(0,t.jsx)("label",{htmlFor:e.id,className:"text-sm font-medium leading-none cursor-pointer flex-1",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.address})]})})]},e.id))}),0===d.filter(e=>e.isActive).length&&(0,t.jsx)(E.DE,{message:"No active schools available for assignment"})]})]}),(0,t.jsxs)(A.cN,{children:[(0,t.jsx)(y.z,{type:"button",variant:"outline",onClick:l,children:"Cancel"}),(0,t.jsx)(y.z,{type:"submit",disabled:o,children:o?"Saving...":"create"===n?"Create User":"Save Changes"})]})]})]})})}function q(){const[e,s]=(0,r.useState)([]),[a,w]=(0,r.useState)([]),[S,A]=(0,r.useState)({totalUsers:0,totalProviders:0,totalAdmins:0,activeUsers:0,inactiveUsers:0}),[k,E]=(0,r.useState)(new Set),[U,C]=(0,r.useState)(""),[z,I]=(0,r.useState)("all"),[q,_]=(0,r.useState)("all"),[J,H]=(0,r.useState)(!0),[T,K]=(0,r.useState)(null),[V,W]=(0,r.useState)(!1),[B,X]=(0,r.useState)(null),[Y,$]=(0,r.useState)("create");(0,r.useEffect)(()=>{G()},[]),(0,r.useEffect)(()=>{Q()},[e,U,z,q]);const G=async()=>{try{H(!0),K(null);const[e,a]=await Promise.all([Z(),P()]);s(e),A(a)}catch(e){console.error("Error loading users:",e),K("Failed to load users. Please try again.")}finally{H(!1)}},Q=()=>{let s=[...e];if(U){const e=U.toLowerCase();s=s.filter(s=>{let a,t;return(null===(a=s.email)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(t=s.displayName)||void 0===t?void 0:t.toLowerCase().includes(e))})}"all"!==z&&(s=s.filter(e=>"active"===z?e.isActive:!e.isActive)),"all"!==q&&(s=s.filter(e=>e.role===q)),w(s)},ee=async e=>{if(C(e),e.trim())try{const s=await M(e);w(s)}catch(e){console.error("Error searching users:",e)}},es=async(e,s)=>{try{await L(e,s),await G()}catch(e){console.error("Error updating user role:",e),K("Failed to update user role")}},ea=async(e,s)=>{try{await D(e,!s),await G()}catch(e){console.error("Error updating user status:",e),K("Failed to update user status")}},et=e=>{X(e),$("edit"),W(!0)},er=async()=>{await G()},el=(e,s)=>{const a=new Set(k);s?a.add(e):a.delete(e),E(a)},ei=async e=>{try{await R(Array.from(k),e),E(new Set),await G()}catch(e){console.error("Error bulk updating user status:",e),K("Failed to update users")}},en=async()=>{if(confirm("Are you sure you want to delete ".concat(k.size," users? This action cannot be undone.")))try{await F(Array.from(k)),E(new Set),await G()}catch(e){console.error("Error bulk deleting users:",e),K("Failed to delete users")}},ed=e=>"admin"===e?"destructive":"secondary",ec=e=>e?"default":"secondary";return J?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"User Management"})}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsxs)(f.Zb,{className:"animate-pulse",children:[(0,t.jsx)(f.Ol,{className:"pb-2",children:(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"})}),(0,t.jsx)(f.aY,{children:(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2"})})]},s))})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"User Management"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage user accounts and role assignments"})]}),(0,t.jsxs)(y.z,{onClick:()=>{X(null),$("create"),W(!0)},children:[(0,t.jsx)(i.Z,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),T&&(0,t.jsx)(b.bZ,{variant:"destructive",children:(0,t.jsx)(b.X,{children:T})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:S.totalUsers}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Total Users"})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-brand-primary",children:S.totalProviders}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Providers"})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:S.totalAdmins}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Admins"})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:S.activeUsers}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Active"})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:S.inactiveUsers}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Inactive"})]})]}),(0,t.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4 flex-1",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)(n.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,t.jsx)(j.I,{placeholder:"Search users by name or email...",value:U,onChange:e=>ee(e.target.value),className:"pl-10"})]}),(0,t.jsxs)("select",{value:z,onChange:e=>I(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"all",children:"All Status"}),(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,t.jsxs)("select",{value:q,onChange:e=>_(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"all",children:"All Roles"}),(0,t.jsx)("option",{value:"provider",children:"Providers"}),(0,t.jsx)("option",{value:"admin",children:"Admins"})]}),(0,t.jsxs)(y.z,{variant:"outline",onClick:()=>{const e=new Blob([["Email,Display Name,Role,Status,Assigned Schools,Created At,Last Sign In",...a.map(e=>{let s,a,t,r,l,i,n;return[e.email||"",e.displayName||"",e.role,e.isActive?"Active":"Inactive",(null===(s=e.assignedSchools)||void 0===s?void 0:s.length)||0,(null===(r=e.createdAt)||void 0===r?void 0:null===(t=r.toDate)||void 0===t?void 0:null===(a=t.call(r))||void 0===a?void 0:a.toLocaleDateString())||"",(null===(n=e.lastSignIn)||void 0===n?void 0:null===(i=n.toDate)||void 0===i?void 0:null===(l=i.call(n))||void 0===l?void 0:l.toLocaleDateString())||"Never"].join(",")})].join("\n")],{type:"text/csv"}),s=window.URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="users-export-".concat(new Date().toISOString().split("T")[0],".csv"),t.click(),window.URL.revokeObjectURL(s)},children:[(0,t.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),k.size>0&&(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 status-brand border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-brand-primary",children:[k.size," users selected"]}),(0,t.jsxs)(y.z,{variant:"outline",size:"sm",onClick:()=>ei(!0),disabled:J,children:[(0,t.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Activate"]}),(0,t.jsxs)(y.z,{variant:"outline",size:"sm",onClick:()=>ei(!1),disabled:J,children:[(0,t.jsx)(o,{className:"h-4 w-4 mr-2"}),"Deactivate"]}),(0,t.jsxs)(y.z,{variant:"outline",size:"sm",onClick:en,disabled:J,className:"text-red-600 hover:text-red-700",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Delete"]})]}),(0,t.jsx)(y.z,{variant:"ghost",size:"sm",onClick:()=>E(new Set),children:"Clear Selection"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,t.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold",children:["Users (",a.length,")"]}),(0,t.jsxs)(y.z,{variant:"outline",size:"sm",onClick:()=>{k.size===a.length?E(new Set):E(new Set(a.map(e=>e.id)))},className:"flex items-center",children:[k.size===a.length?(0,t.jsx)(u.Z,{className:"h-4 w-4 mr-2"}):(0,t.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Select All"]})]})}),(0,t.jsxs)("div",{className:"divide-y divide-gray-200",children:[a.map(e=>{let s,a,r;return(0,t.jsx)("div",{className:"p-4 hover:bg-gray-50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("input",{type:"checkbox",checked:k.has(e.id),onChange:s=>el(e.id,s.target.checked),className:"rounded border-gray-300 text-brand-primary focus:ring-brand-primary"}),(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:e.photoURL?(0,t.jsx)(l.X,{src:e.photoURL,alt:e.displayName||"User",size:40,fallback:(0,t.jsx)(x.Z,{className:"h-5 w-5 text-gray-600"})}):(0,t.jsx)(x.Z,{className:"h-5 w-5 text-gray-600"})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.displayName||"No name"}),(0,t.jsx)(N.C,{variant:ed(e.role),children:e.role}),(0,t.jsx)(N.C,{variant:ec(e.isActive),children:e.isActive?"Active":"Inactive"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-500 flex items-center",children:[(0,t.jsx)(v.Z,{className:"h-3 w-3 mr-1"}),e.email]}),e.assignedSchools&&e.assignedSchools.length>0&&(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[e.assignedSchools.length," schools assigned"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 flex items-center",children:[(0,t.jsx)(g.Z,{className:"h-3 w-3 mr-1"}),"Joined"," ",(null===(r=e.createdAt)||void 0===r?void 0:null===(a=r.toDate)||void 0===a?void 0:null===(s=a.call(r))||void 0===s?void 0:s.toLocaleDateString())||"Unknown"]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("select",{value:e.role,onChange:s=>es(e.id,s.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"provider",children:"Provider"}),(0,t.jsx)("option",{value:"admin",children:"Admin"})]}),(0,t.jsxs)(y.z,{variant:"outline",size:"sm",onClick:()=>ea(e.id,e.isActive),className:e.isActive?"text-red-600":"text-green-600",children:[e.isActive?(0,t.jsx)(o,{className:"h-4 w-4 mr-1"}):(0,t.jsx)(c.Z,{className:"h-4 w-4 mr-1"}),e.isActive?"Deactivate":"Activate"]}),(0,t.jsxs)(y.z,{variant:"outline",size:"sm",onClick:()=>et(e),children:[(0,t.jsx)(p.Z,{className:"h-4 w-4 mr-1"}),"Edit"]}),(0,t.jsx)(y.z,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(m.Z,{className:"h-4 w-4"})})]})]})},e.id)}),0===a.length&&(0,t.jsxs)("div",{className:"p-8 text-center",children:[(0,t.jsx)(x.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No users found matching your criteria"})]})]})]}),(0,t.jsx)(O,{user:B,isOpen:V,onClose:()=>{W(!1),X(null)},onSave:er,mode:Y})]})}function _(){return(0,t.jsx)(w.ProtectedRoute,{roles:["admin"],children:(0,t.jsx)(S.AdminNavigation,{children:(0,t.jsx)(q,{})})})}}},function(e){e.O(0,[609,15,569,806,145,972,691,258,304,695,95,971,208,744],function(){return e(e.s=30967)}),_N_E=e.O()}]);