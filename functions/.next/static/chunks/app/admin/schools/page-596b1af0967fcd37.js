try{!function(){const e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="891b9076-b6ac-4a07-86de-765d758b6849",e._sentryDebugIdIdentifier="sentry-dbid-891b9076-b6ac-4a07-86de-765d758b6849")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[331],{52474:function(e,s,t){Promise.resolve().then(t.bind(t,86974))},41671:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});const a=(0,t(79205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},33245:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});const a=(0,t(79205).Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},51817:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});const a=(0,t(79205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},77877:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});const a=(0,t(79205).Z)("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]])},99397:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});const a=(0,t(79205).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},15868:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});const a=(0,t(79205).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},18930:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});const a=(0,t(79205).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},76865:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});const a=(0,t(79205).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},86974:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return _}});const a=t(57437),i=t(2265),r=t(99397),n=t(73247),d=t(83774),l=t(95805),o=t(15868),c=t(18930),u=t(12381),h=t(40279),m=t(79820),x=t(69174),f=t(53002),g=t(9109),p=t(75060),j=t(23675),y=t(74291),v=t(95937),N=t(51817),w=t(33245),b=t(41671),M=t(76865),C=t(77877),S=t(49322);const k=(e,s)=>{let t=[],a="high";(e<-90||e>90)&&t.push("Latitude must be between -90 and 90 degrees"),(s<-180||s>180)&&t.push("Longitude must be between -180 and 180 degrees"),0===e&&0===s&&t.push("Coordinates appear to be unset (0, 0)");const i=L(e),r=L(s);return i<4||r<4?a="low":(i<6||r<6)&&(a="medium"),{isValid:0===t.length,precision:a,errors:t,normalizedLat:Math.round(1e6*e)/1e6,normalizedLng:Math.round(1e6*s)/1e6}},Z=e=>{const s=[],t=e.trim();if(!t)return s.push("Address is required"),{isValid:!1,confidence:"low",errors:s};t.length<10&&s.push("Address appears to be too short");let a=/\d/.test(t),i=/,/.test(t),r=/\b[A-Z]{2}\b/.test(t),n=/\b\d{5}(-\d{4})?\b/.test(t),d="low";a&&i&&r&&(d="medium"),a&&i&&r&&n&&(d="high"),a||s.push("Address should include a street number");const l=t.split(",").map(e=>e.trim()),o={};if(l.length>=2&&(o.streetName=l[0],l.length>=3)){o.city=l[1];const e=l[l.length-1].match(/([A-Z]{2})\s*(\d{5}(?:-\d{4})?)?/);e&&(o.state=e[1],o.postalCode=e[2])}return{isValid:0===s.length,confidence:d,errors:s,components:o,standardizedAddress:t}},A=(e,s,t,a)=>{const i=[],r=[],n=[],d=Z(e);d.isValid?"low"===d.confidence&&(r.push("Address format could be improved for better accuracy"),n.push("Include city, state, and ZIP code for better geocoding")):i.push(...d.errors);const l=k(s,t);return l.isValid?"low"===l.precision&&(r.push("GPS coordinates have low precision"),n.push("Use more precise coordinates (at least 4 decimal places)")):i.push(...l.errors),void 0!==a&&(a<10?(r.push("Check-in radius is very small (< 10m)"),n.push("Consider using at least 25m radius for reliable check-ins")):a>500&&(r.push("Check-in radius is very large (> 500m)"),n.push("Large radius may allow check-ins from far away"))),l.isValid&&(s>24&&s<50&&t>-125&&t<-66||(s>18&&s<72&&t>-180&&t<-60?r.push("Coordinates appear to be outside continental US"):r.push("Coordinates appear to be outside the United States"))),{isValid:0===i.length,errors:i,warnings:r,suggestions:n}},z=async e=>{try{const s=Z(e);if(!s.isValid)return{success:!1,confidence:"low",error:s.errors.join("; ")};await new Promise(e=>setTimeout(e,1e3));const t=function(e){const s=e.toLowerCase();return s.includes("chicago")||s.includes("wells")?{lat:41.8781+(Math.random()-.5)*.05,lng:-87.6298+(Math.random()-.5)*.05}:s.includes("phoenix")||s.includes("arizona")||s.includes("estrella")?{lat:33.4484+(Math.random()-.5)*.05,lng:-112.074+(Math.random()-.5)*.05}:{lat:39.8283+(Math.random()-.5)*10,lng:-98.5795+(Math.random()-.5)*20}}(e);if(!t)return{success:!1,confidence:"low",error:"Address could not be geocoded. Please check the address and try again."};const a=k(t.lat,t.lng);return{success:!0,coordinates:{lat:a.normalizedLat||t.lat,lng:a.normalizedLng||t.lng},standardizedAddress:s.standardizedAddress,confidence:s.confidence}}catch(e){return{success:!1,confidence:"low",error:"Geocoding service temporarily unavailable. Please enter coordinates manually."}}},P=async(e,s)=>{try{const t=k(e,s);if(!t.isValid)return{success:!1,error:t.errors.join("; ")};await new Promise(e=>setTimeout(e,800));const a=function(e,s){const t=["Main St","Oak Ave","Elm St","First Ave","Park Blvd","School Dr"],a=["Chicago","Springfield","Madison","Franklin","Washington"],i=["IL","WI","IN","IA","MO"],r=t[Math.floor(Math.random()*t.length)],n=a[Math.floor(Math.random()*a.length)],d=i[Math.floor(Math.random()*i.length)];return"".concat(Math.floor(9999*Math.random())+1," ").concat(r,", ").concat(n,", ").concat(d," ").concat(Math.floor(9e4*Math.random())+1e4)}(0,0);return{success:!0,address:a}}catch(e){return{success:!1,error:"Reverse geocoding failed. Please enter address manually."}}};function L(e){if(Math.floor(e)===e)return 0;const s=e.toString();return -1!==s.indexOf(".")&&-1===s.indexOf("e-")?s.split(".")[1].length:-1!==s.indexOf("e-")?parseInt(s.split("e-")[1],10):0}const I=(e,s,t,a)=>{const i=(t-e)*Math.PI/180,r=(a-s)*Math.PI/180,n=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e*Math.PI/180)*Math.cos(t*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n))*6371e3},F=async function(e,s,t){const a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;try{const i=await z(e);if(!i.success||!i.coordinates)return{isMatch:!1,error:"Could not validate address coordinates: "+i.error};const r=I(s,t,i.coordinates.lat,i.coordinates.lng);return{isMatch:r<=a,distance:r}}catch(e){return{isMatch:!1,error:"Failed to validate coordinate and address match"}}};function V(e){let{school:s,isOpen:t,onClose:r,onSubmit:n,isLoading:l=!1}=e,[o,c]=(0,i.useState)(null),[f,g]=(0,i.useState)(!1),[L,I]=(0,i.useState)(!1),[V,D]=(0,i.useState)(null),[_,T]=(0,i.useState)(""),[E,O]=(0,i.useState)(null),[q,R]=(0,i.useState)({name:(null==s?void 0:s.name)||"",address:(null==s?void 0:s.address)||"",latitude:(null==s?void 0:s.latitude)||0,longitude:(null==s?void 0:s.longitude)||0,radius:(null==s?void 0:s.radius)||100,description:(null==s?void 0:s.description)||""}),G=!!(null==s?void 0:s.id);(0,i.useEffect)(()=>{q.address&&q.latitude&&q.longitude?D(A(q.address,q.latitude,q.longitude,q.radius)):D(null)},[q.address,q.latitude,q.longitude,q.radius]);const H=async()=>{if(q.address&&q.latitude&&q.longitude){I(!0);try{const e=await F(q.address,q.latitude,q.longitude,1e3);O(e)}catch(e){O({isMatch:!1,error:"Failed to validate coordinate and address match"})}finally{I(!1)}}},W=async e=>{if(e.preventDefault(),!q.name.trim()){c("School name is required");return}const s=Z(q.address);if(!s.isValid){c("Address validation failed: "+s.errors.join(", "));return}const t=k(q.latitude,q.longitude);if(!t.isValid){c("Coordinate validation failed: "+t.errors.join(", "));return}const a=A(q.address,q.latitude,q.longitude,q.radius);if(!a.isValid){c("Location validation failed: "+a.errors.join(", "));return}a.warnings.length>0&&console.warn("Location validation warnings:",a.warnings);try{c(null);const e={...q,latitude:t.normalizedLat||q.latitude,longitude:t.normalizedLng||q.longitude};await n(e),r()}catch(e){c(e.message||"Failed to save school")}},U=async()=>{if(!q.address){c("Please enter an address first");return}g(!0),c(null);try{const e=await z(q.address);if(!e.success||!e.coordinates){c(e.error||"Failed to geocode address");return}R(s=>({...s,latitude:e.coordinates.lat,longitude:e.coordinates.lng})),e.standardizedAddress&&e.standardizedAddress!==q.address&&T(e.standardizedAddress),setTimeout(()=>{H()},100)}catch(e){c("Failed to geocode address. Please enter coordinates manually.")}finally{g(!1)}},X=async()=>{if(!q.latitude||!q.longitude){c("Please enter coordinates first");return}g(!0),c(null);try{const e=await P(q.latitude,q.longitude);if(!e.success||!e.address){c(e.error||"Failed to find address for coordinates");return}R(s=>({...s,address:e.address}))}catch(e){c("Failed to reverse geocode coordinates. Please enter address manually.")}finally{g(!1)}},Y=(e,s)=>{R(t=>({...t,[e]:s}))};return(0,a.jsx)(y.Vq,{open:t,onOpenChange:r,children:(0,a.jsxs)(y.cZ,{className:"max-w-2xl",children:[(0,a.jsxs)(y.fK,{children:[(0,a.jsx)(y.$N,{children:G?"Edit School":"Add New School"}),(0,a.jsx)(y.Be,{children:G?"Update the school information below.":"Enter the details for the new school location."})]}),(0,a.jsxs)("form",{onSubmit:W,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p._,{htmlFor:"name",children:"School Name"}),(0,a.jsx)(h.I,{id:"name",placeholder:"e.g., Walter Payton HS",value:q.name,onChange:e=>Y("name",e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p._,{htmlFor:"radius",children:"Check-in Radius (meters)"}),(0,a.jsx)(h.I,{id:"radius",type:"number",placeholder:"100",min:"10",max:"1000",value:q.radius,onChange:e=>Y("radius",Number(e.target.value))}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"How close providers need to be to check in (10-1000m)"}),(0,a.jsx)(x.C,{variant:q.radius<25?"destructive":q.radius>500?"secondary":"default",className:"text-xs",children:q.radius<25?"Very Small":q.radius>500?"Very Large":"Good Size"})]}),(q.radius<25||q.radius>500)&&(0,a.jsx)("p",{className:"text-xs text-orange-600",children:q.radius<25?"Small radius may cause check-in difficulties. Consider 25m or more.":"Large radius may allow check-ins from far away. Consider 500m or less."})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p._,{htmlFor:"address",children:"Address"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(h.I,{id:"address",placeholder:"e.g., 1034 N Wells St, Chicago, IL 60610",value:q.address,onChange:e=>Y("address",e.target.value),className:"flex-1",required:!0}),(0,a.jsxs)(u.z,{type:"button",variant:"outline",onClick:U,disabled:f||!q.address,children:[f?(0,a.jsx)(N.Z,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(d.Z,{className:"h-4 w-4"}),f?"Finding...":"Get Coords"]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:'Enter the full address and click "Get Coords" to auto-fill coordinates'})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p._,{htmlFor:"latitude",children:"Latitude"}),(0,a.jsx)(h.I,{id:"latitude",type:"number",step:"any",placeholder:"41.8781",value:q.latitude,onChange:e=>Y("latitude",Number(e.target.value)),required:!0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"GPS latitude (-90 to 90)"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p._,{htmlFor:"longitude",children:"Longitude"}),(0,a.jsx)(h.I,{id:"longitude",type:"number",step:"any",placeholder:"-87.6298",value:q.longitude,onChange:e=>Y("longitude",Number(e.target.value)),required:!0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"GPS longitude (-180 to 180)"})]})]}),_&&(0,a.jsxs)(v.bZ,{children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),(0,a.jsx)(v.X,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{children:["Suggested standardized address:"," ",(0,a.jsx)("strong",{children:_})]}),(0,a.jsx)(u.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{_&&(R(e=>({...e,address:_})),T(""))},children:"Use This"})]})})]}),V&&(0,a.jsxs)("div",{className:"space-y-2",children:[V.isValid&&(0,a.jsxs)(v.bZ,{children:[(0,a.jsx)(b.Z,{className:"h-4 w-4"}),(0,a.jsx)(v.X,{children:"Location validation passed successfully"})]}),V.warnings.length>0&&(0,a.jsxs)(v.bZ,{variant:"default",children:[(0,a.jsx)(M.Z,{className:"h-4 w-4"}),(0,a.jsx)(v.X,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"Validation Warnings:"}),(0,a.jsx)("ul",{className:"text-sm space-y-1",children:V.warnings.map((e,s)=>(0,a.jsxs)("li",{children:["• ",e]},s))})]})})]}),V.suggestions&&V.suggestions.length>0&&(0,a.jsxs)(v.bZ,{variant:"default",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),(0,a.jsx)(v.X,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"Suggestions:"}),(0,a.jsx)("ul",{className:"text-sm space-y-1",children:V.suggestions.map((e,s)=>(0,a.jsxs)("li",{children:["• ",e]},s))})]})})]})]}),0!==q.latitude&&0!==q.longitude&&(0,a.jsxs)(m.Zb,{children:[(0,a.jsx)(m.Ol,{children:(0,a.jsxs)(m.ll,{className:"text-sm flex items-center",children:[(0,a.jsx)(C.Z,{className:"h-4 w-4 mr-2"}),"GPS Coordinate Validation"]})}),(0,a.jsxs)(m.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Coordinate Precision:"}),(0,a.jsxs)(x.C,{variant:"high"===k(q.latitude,q.longitude).precision?"default":"medium"===k(q.latitude,q.longitude).precision?"secondary":"destructive",children:[k(q.latitude,q.longitude).precision," ","precision"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Coordinates:"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:[q.latitude.toFixed(6),","," ",q.longitude.toFixed(6)]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(u.z,{type:"button",variant:"outline",size:"sm",onClick:X,disabled:f,children:[f?(0,a.jsx)(N.Z,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(C.Z,{className:"h-4 w-4 mr-2"}),"Get Address from Coords"]}),(0,a.jsxs)(u.z,{type:"button",variant:"outline",size:"sm",onClick:H,disabled:L||!q.address,children:[L?(0,a.jsx)(N.Z,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Validate Match"]})]}),E&&(0,a.jsxs)(v.bZ,{variant:E.isMatch?"default":"destructive",children:[E.isMatch?(0,a.jsx)(b.Z,{className:"h-4 w-4"}):(0,a.jsx)(M.Z,{className:"h-4 w-4"}),(0,a.jsx)(v.X,{children:E.isMatch?(0,a.jsxs)("span",{children:["Address and coordinates match well",E.distance&&(0,a.jsxs)("span",{className:"text-muted-foreground",children:[" ","(~",Math.round(E.distance),"m apart)"]})]}):(0,a.jsxs)("span",{children:[E.error||"Address and coordinates don't match well",E.distance&&(0,a.jsxs)("span",{className:"text-muted-foreground",children:[" ","(~",Math.round(E.distance),"m apart)"]})]})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p._,{htmlFor:"description",children:"Description (Optional)"}),(0,a.jsx)(j.g,{id:"description",placeholder:"Additional notes about this school location...",value:q.description,onChange:e=>Y("description",e.target.value)})]}),o&&(0,a.jsxs)(v.bZ,{variant:"destructive",children:[(0,a.jsx)(S.Z,{className:"h-4 w-4"}),(0,a.jsx)(v.X,{children:o})]}),(0,a.jsxs)(y.cN,{children:[(0,a.jsx)(u.z,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),(0,a.jsx)(u.z,{type:"submit",disabled:l,children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 animate-spin mr-2"}),G?"Updating...":"Creating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),G?"Update School":"Create School"]})})]})]})]})})}function D(){const[e,s]=(0,i.useState)([]),[t,f]=(0,i.useState)([]),[g,p]=(0,i.useState)(""),[j,y]=(0,i.useState)(!1),[N,w]=(0,i.useState)(null),[b,M]=(0,i.useState)(!1),[C,S]=(0,i.useState)(null),k=[{id:"1",name:"Walter Payton College Preparatory High School",address:"1034 N Wells St, Chicago, IL 60610",latitude:41.899441,longitude:-87.633997,radius:100,description:"High-performing selective enrollment high school",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15"),activeProviders:3,totalSessions:45},{id:"2",name:"Jones College Prep High School",address:"700 S State St, Chicago, IL 60605",latitude:41.871431,longitude:-87.627683,radius:150,description:"Selective enrollment high school in the South Loop",createdAt:new Date("2024-01-20"),updatedAt:new Date("2024-01-20"),activeProviders:2,totalSessions:32},{id:"3",name:"Lane Tech College Prep High School",address:"2501 W Addison St, Chicago, IL 60618",latitude:41.947068,longitude:-87.693497,radius:120,description:"Large selective enrollment high school",createdAt:new Date("2024-01-25"),updatedAt:new Date("2024-01-25"),activeProviders:5,totalSessions:78}];(0,i.useEffect)(()=>{(async()=>{M(!0);try{await new Promise(e=>setTimeout(e,500)),s(k),f(k)}catch(e){S("Failed to load schools")}finally{M(!1)}})()},[]),(0,i.useEffect)(()=>{if(!g.trim()){f(e);return}f(e.filter(e=>{let s;return e.name.toLowerCase().includes(g.toLowerCase())||e.address.toLowerCase().includes(g.toLowerCase())||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(g.toLowerCase()))}))},[g,e]);const Z=async e=>{try{M(!0);const t={id:Date.now().toString(),...e,createdAt:new Date,updatedAt:new Date,activeProviders:0,totalSessions:0};await new Promise(e=>setTimeout(e,1e3)),s(e=>[...e,t]),S(null)}catch(e){throw Error("Failed to create school")}finally{M(!1)}},A=async e=>{if(N)try{M(!0);const t={...N,...e,updatedAt:new Date};await new Promise(e=>setTimeout(e,1e3)),s(e=>e.map(e=>e.id===N.id?t:e)),w(null),S(null)}catch(e){throw Error("Failed to update school")}finally{M(!1)}},z=async e=>{if(confirm("Are you sure you want to delete this school? This action cannot be undone."))try{M(!0),await new Promise(e=>setTimeout(e,500)),s(s=>s.filter(s=>s.id!==e)),S(null)}catch(e){S("Failed to delete school")}finally{M(!1)}},P=e=>{w(e),y(!0)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"School Management"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage school locations and their check-in settings for Title I providers."})]}),(0,a.jsxs)(u.z,{onClick:()=>y(!0),children:[(0,a.jsx)(r.Z,{className:"h-4 w-4 mr-2"}),"Add School"]})]}),(0,a.jsx)("div",{className:"flex flex-col sm:flex-row gap-4",children:(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(n.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)(h.I,{placeholder:"Search schools by name, address, or description...",value:g,onChange:e=>p(e.target.value),className:"pl-10"})]})}),C&&(0,a.jsx)(v.bZ,{variant:"destructive",children:(0,a.jsx)(v.X,{children:C})}),b?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>(0,a.jsxs)(m.Zb,{className:"animate-pulse",children:[(0,a.jsxs)(m.Ol,{children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),(0,a.jsx)(m.aY,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})})]},s))}):0===t.length?(0,a.jsx)(m.Zb,{className:"text-center py-12",children:(0,a.jsxs)(m.aY,{children:[(0,a.jsx)(d.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:g?"No schools found":"No schools configured"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:g?"Try adjusting your search criteria.":"Add your first school location to get started."}),!g&&(0,a.jsxs)(u.z,{onClick:()=>y(!0),children:[(0,a.jsx)(r.Z,{className:"h-4 w-4 mr-2"}),"Add First School"]})]})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,a.jsxs)(m.Zb,{className:"hover:shadow-lg transition-shadow",children:[(0,a.jsx)(m.Ol,{children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)(m.ll,{className:"text-lg font-semibold truncate",children:e.name}),(0,a.jsxs)(m.SZ,{className:"flex items-center mt-1",children:[(0,a.jsx)(d.Z,{className:"h-3 w-3 mr-1 shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:e.address})]})]})})}),(0,a.jsx)(m.aY,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 mr-1"}),(0,a.jsxs)("span",{children:[e.activeProviders||0," providers"]})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("span",{children:[e.totalSessions||0," sessions"]})})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Check-in radius:"}),(0,a.jsxs)(x.C,{variant:"outline",children:[e.radius,"m"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Coordinates:"}),(0,a.jsxs)("span",{className:"text-gray-900 font-mono text-xs",children:[e.latitude.toFixed(4),","," ",e.longitude.toFixed(4)]})]})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>P(e),className:"flex-1",children:[(0,a.jsx)(o.Z,{className:"h-3 w-3 mr-1"}),"Edit"]}),(0,a.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>z(e.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,a.jsx)(c.Z,{className:"h-3 w-3"})})]})]})})]},e.id))}),(0,a.jsx)(V,{school:N||void 0,isOpen:j,onClose:()=>{y(!1),w(null)},onSubmit:N?A:Z,isLoading:b})]})}function _(){return(0,a.jsx)(f.ProtectedRoute,{roles:["admin"],children:(0,a.jsx)(g.AdminNavigation,{children:(0,a.jsx)(D,{})})})}},74291:function(e,s,t){"use strict";t.d(s,{$N:function(){return f},Be:function(){return g},Vq:function(){return l},cN:function(){return x},cZ:function(){return h},fK:function(){return m},hg:function(){return o}});const a=t(57437),i=t(2265),r=t(44182),n=t(32489),d=t(93448);const l=r.fC,o=r.xz,c=r.h_;r.x8;const u=i.forwardRef((e,s)=>{const{className:t,...i}=e;return(0,a.jsx)(r.aV,{ref:s,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...i})});u.displayName=r.aV.displayName;const h=i.forwardRef((e,s)=>{const{className:t,children:i,...l}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(r.VY,{ref:s,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[i,(0,a.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=r.VY.displayName;const m=e=>{const{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};m.displayName="DialogHeader";const x=e=>{const{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};x.displayName="DialogFooter";const f=i.forwardRef((e,s)=>{const{className:t,...i}=e;return(0,a.jsx)(r.Dx,{ref:s,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",t),...i})});f.displayName=r.Dx.displayName;const g=i.forwardRef((e,s)=>{const{className:t,...i}=e;return(0,a.jsx)(r.dk,{ref:s,className:(0,d.cn)("text-sm text-muted-foreground",t),...i})});g.displayName=r.dk.displayName},40279:function(e,s,t){"use strict";t.d(s,{I:function(){return n}});const a=t(57437),i=t(2265),r=t(93448);const n=i.forwardRef((e,s)=>{const{className:t,type:i,...n}=e;return(0,a.jsx)("input",{type:i,className:(0,r.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});n.displayName="Input"},75060:function(e,s,t){"use strict";t.d(s,{_:function(){return o}});const a=t(57437),i=t(2265),r=t(6394),n=t(90535),d=t(93448);const l=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=i.forwardRef((e,s)=>{const{className:t,...i}=e;return(0,a.jsx)(r.f,{ref:s,className:(0,d.cn)(l(),t),...i})});o.displayName=r.f.displayName},23675:function(e,s,t){"use strict";t.d(s,{g:function(){return n}});const a=t(57437),i=t(2265),r=t(93448);const n=i.forwardRef((e,s)=>{const{className:t,...i}=e;return(0,a.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...i})});n.displayName="Textarea"},6394:function(e,s,t){"use strict";t.d(s,{f:function(){return d}});const a=t(2265),i=t(66840),r=t(57437),n=a.forwardRef((e,s)=>(0,r.jsx)(i.WV.label,{...e,ref:s,onMouseDown:s=>{let t;s.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));n.displayName="Label";var d=n}},function(e){e.O(0,[609,15,569,806,145,972,691,258,304,695,971,208,744],function(){return e(e.s=52474)}),_N_E=e.O()}]);