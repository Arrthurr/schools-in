try{!function(){const e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8a917005-4c96-4dbd-855e-f7218569a575",e._sentryDebugIdIdentifier="sentry-dbid-8a917005-4c96-4dbd-855e-f7218569a575")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{60243:function(e,t,r){Promise.resolve().then(r.bind(r,53002)),Promise.resolve().then(r.bind(r,59664))},50237:function(e,t,r){"use strict";r.d(t,{I8:function(){return c},Sv:function(){return f},co:function(){return m},db:function(){return u}});const n=r(738),s=r(82148),a=r(5978),i=r(96485),o=r(54764),d=r(8333);const l=(0,n.ZF)({apiKey:"AIzaSyB5GTFpkeRk7dIJL0hm1Xr5SBX_RQnqt_A",authDomain:"schools-in-check.firebaseapp.com",projectId:"schools-in-check",storageBucket:"schools-in-check.firebasestorage.app",messagingSenderId:"227078219689",appId:"1:227078219689:web:71408317e8899ed6fe46b8"}),c=(0,s.v0)(l),u=(0,a.ad)(l);(0,i.cF)(l);let f=null;try{f=(0,o.r)(l)}catch(e){console.warn("Failed to initialize Firebase Performance:",e)}let m=null;(0,d.Gb)().then(e=>{e&&(m=(0,d.IH)(l))}).catch(e=>{console.warn("Failed to initialize Firebase Analytics:",e)});try{(0,a.fH)(u).catch(e=>{"failed-precondition"===e.code?console.warn("Firebase persistence failed: Multiple tabs open"):"unimplemented"===e.code&&console.warn("Firebase persistence not supported by browser")})}catch(e){console.warn("Failed to enable Firebase persistence:",e)}},99376:function(e,t,r){"use strict";const n=r(35475);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},53002:function(e,t,r){"use strict";r.d(t,{ProtectedRoute:function(){return i}});const n=r(57437),s=r(85687),a=r(99376);function i(e){let{children:t,roles:r}=e,{user:i,loading:o}=(0,s.a)(),d=(0,a.useRouter)();return o?(0,n.jsx)("div",{children:"Loading..."}):i?i.role&&!r.includes(i.role)?(d.push("/dashboard"),null):(0,n.jsx)(n.Fragment,{children:t}):(d.push("/"),null)}},59664:function(e,t,r){"use strict";r.d(t,{UserProfile:function(){return h}});const n=r(57437),s=r(2265),a=r(85687),i=r(12381),o=r(40279),d=r(75060),l=r(79820),c=r(29501),u=r(13590),f=r(36900),m=r(82148),p=r(50237);const b=f.Ry({displayName:f.Z_().min(2,{message:"Display name must be at least 2 characters."})});function h(){const{user:e}=(0,a.a)(),[t,r]=(0,s.useState)(!1),[f,h]=(0,s.useState)(!1),y=(0,c.cI)({resolver:(0,u.F)(b),defaultValues:{displayName:(null==e?void 0:e.displayName)||""}}),x=async t=>{if(e){r(!0),h(!1);try{await (0,m.ck)(p.I8.currentUser,{displayName:t.displayName}),h(!0)}catch(e){console.error(e)}finally{r(!1)}}};return e?(0,n.jsxs)(l.Zb,{className:"max-w-lg mx-auto",children:[(0,n.jsx)(l.Ol,{children:(0,n.jsx)(l.ll,{children:"User Profile"})}),(0,n.jsxs)(l.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(d._,{children:"Email"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d._,{children:"Role"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:e.role})]}),(0,n.jsxs)("form",{onSubmit:y.handleSubmit(x),className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d._,{htmlFor:"displayName",children:"Display Name"}),(0,n.jsx)(o.I,{id:"displayName",...y.register("displayName")}),y.formState.errors.displayName&&(0,n.jsx)("p",{className:"text-sm text-destructive",children:y.formState.errors.displayName.message})]}),(0,n.jsx)(i.z,{type:"submit",disabled:t,children:t?"Updating...":"Update Profile"}),f&&(0,n.jsx)("p",{className:"text-sm text-green-600",children:"Profile updated successfully!"})]})]})]}):(0,n.jsx)("div",{children:"Loading..."})}},12381:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});const n=r(57437),s=r(2265),a=r(37053),i=r(90535),o=r(93448);const d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-primary focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:l=!1,...c}=e,u=l?a.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(d({variant:s,size:i,className:r})),ref:t,...c})});l.displayName="Button"},79820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return i},aY:function(){return c},ll:function(){return d}});const n=r(57437),s=r(2265),a=r(93448);const i=s.forwardRef((e,t)=>{const{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...s})});i.displayName="Card";const o=s.forwardRef((e,t)=>{const{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";const d=s.forwardRef((e,t)=>{const{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",r),...s})});d.displayName="CardTitle";const l=s.forwardRef((e,t)=>{const{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...s})});l.displayName="CardDescription";const c=s.forwardRef((e,t)=>{const{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{const{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},40279:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});const n=r(57437),s=r(2265),a=r(93448);const i=s.forwardRef((e,t)=>{const{className:r,type:s,...i}=e;return(0,n.jsx)("input",{type:s,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"},75060:function(e,t,r){"use strict";r.d(t,{_:function(){return l}});const n=r(57437),s=r(2265),a=r(6394),i=r(90535),o=r(93448);const d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=s.forwardRef((e,t)=>{const{className:r,...s}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,o.cn)(d(),r),...s})});l.displayName=a.f.displayName},73634:function(e,t,r){"use strict";r.d(t,{Me:function(){return i},Ul:function(){return a},_N:function(){return d},gU:function(){return o}});const n=r(5978),s=r(50237);const a={USERS:"users",SESSIONS:"sessions",LOCATIONS:"locations"},i=async(e,t)=>{const r=await (0,n.QT)((0,n.JU)(s.db,e,t));return r.exists()?{id:r.id,...r.data()}:null},o=async(e,t,r)=>{await (0,n.r7)((0,n.JU)(s.db,e,t),r)},d=async e=>(await (0,n.PL)((0,n.hJ)(s.db,e))).docs.map(e=>({id:e.id,...e.data()}))},85687:function(e,t,r){"use strict";r.d(t,{a:function(){return o}});const n=r(2265),s=r(82148),a=r(50237),i=r(73634);function o(){const[e,t]=(0,n.useState)(null),[r,o]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{const e=(0,s.Aj)(a.I8,async e=>{if(e){const r=await (0,i.Me)(i.Ul.USERS,e.uid);t({...e,role:null==r?void 0:r.role})}else t(null);o(!1)});return()=>e()},[]),{user:e,loading:r}}},93448:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});const n=r(61994),s=r(53335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}}},function(e){e.O(0,[609,15,569,806,330,971,208,744],function(){return e(e.s=60243)}),_N_E=e.O()}]);