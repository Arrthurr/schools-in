try{!function(){const e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="69b8710f-946d-4806-80f0-3f5de253f2bc",e._sentryDebugIdIdentifier="sentry-dbid-69b8710f-946d-4806-80f0-3f5de253f2bc")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46],{74002:function(e,s,a){Promise.resolve().then(a.bind(a,5431))},5431:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return z}});const l=a(57437),t=a(2265),i=a(53002),r=a(2662),c=a(15926),n=a(53943),d=a(79820),m=a(12381),x=a(69174),o=a(83774),h=a(41671),j=a(49322),g=a(32660),N=a(32489),u=a(95805),b=a(77877),p=a(91723),f=a(58896),y=a(73559),v=a(13041),w=a(89345),k=a(29202),Z=a(31047);const C=e=>{let{school:s,onBack:a,onClose:i,onCheckIn:r,showCheckInButton:C=!1,className:S=""}=e,{location:I,loading:z,getLocation:Y}=(0,c.T)(),[D,E]=(0,t.useState)(null),[O,_]=(0,t.useState)(null);(0,t.useEffect)(()=>{I&&s?(_(n.E.calculateDistance(I.latitude,I.longitude,s.latitude,s.longitude)),E(n.E.isWithinRadius(I.latitude,I.longitude,s))):(_(null),E(null))},[I,s]);const L=e=>e<1e3?"".concat(Math.round(e),"m"):"".concat((e/1e3).toFixed(1),"km");return(0,l.jsxs)("div",{className:"bg-white ".concat(S),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-6 border-b bg-gray-50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)(m.z,{variant:"ghost",size:"sm",onClick:a,className:"hover:bg-gray-200",children:[(0,l.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Back to List"]}),(0,l.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,l.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:s.name})]}),i&&(0,l.jsx)(m.z,{variant:"ghost",size:"sm",onClick:i,children:(0,l.jsx)(N.Z,{className:"h-4 w-4"})})]}),(0,l.jsxs)("div",{className:"p-6 space-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[I&&null!==D?D?(0,l.jsxs)(x.C,{variant:"secondary",className:"bg-green-100 text-green-700 border-green-200",children:[(0,l.jsx)(h.Z,{className:"w-3 h-3 mr-1"}),"In Check-in Range"]}):(0,l.jsxs)(x.C,{variant:"secondary",className:"bg-yellow-100 text-yellow-700 border-yellow-200",children:[(0,l.jsx)(j.Z,{className:"w-3 h-3 mr-1"}),"Outside Check-in Range"]}):(0,l.jsxs)(x.C,{variant:"secondary",className:"bg-gray-100 text-gray-700",children:[(0,l.jsx)(o.Z,{className:"w-3 h-3 mr-1"}),"Location Unknown"]}),s.isAssigned&&(0,l.jsxs)(x.C,{variant:"default",className:"bg-primary",children:[(0,l.jsx)(u.Z,{className:"w-3 h-3 mr-1"}),"Assigned"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[!I&&(0,l.jsxs)(m.z,{onClick:Y,disabled:z,size:"sm",variant:"outline",children:[z?(0,l.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary mr-2"}):(0,l.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Get Location"]}),C&&(0,l.jsxs)(m.z,{onClick:()=>{r&&D&&r(s)},disabled:!I||!D,className:"bg-primary hover:bg-primary/90",children:[(0,l.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Check In"]})]})]}),(0,l.jsxs)(d.Zb,{children:[(0,l.jsx)(d.Ol,{children:(0,l.jsxs)(d.ll,{className:"flex items-center text-lg",children:[(0,l.jsx)(o.Z,{className:"h-5 w-5 mr-2 text-brand-primary"}),"Location Details"]})}),(0,l.jsxs)(d.aY,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(o.Z,{className:"h-4 w-4 text-gray-500 mt-1"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:"Address"}),(0,l.jsx)("p",{className:"text-gray-600",children:s.address||"Address not available"})]})]}),(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(f.Z,{className:"h-4 w-4 text-gray-500 mt-1"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:"GPS Coordinates"}),(0,l.jsxs)("p",{className:"text-gray-600 font-mono text-sm",children:[s.latitude.toFixed(6),", ",s.longitude.toFixed(6)]})]})]}),null!==O&&(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(b.Z,{className:"h-4 w-4 text-gray-500 mt-1"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:"Distance from You"}),(0,l.jsx)("p",{className:"text-gray-600",children:L(O)})]})]}),(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(y.Z,{className:"h-4 w-4 text-gray-500 mt-1"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:"Check-in Radius"}),(0,l.jsxs)("p",{className:"text-gray-600",children:[s.radius||100," meters"]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"You must be within this range to check in"})]})]})]})]}),(0,l.jsxs)(d.Zb,{children:[(0,l.jsx)(d.Ol,{children:(0,l.jsxs)(d.ll,{className:"flex items-center text-lg",children:[(0,l.jsx)(v.Z,{className:"h-5 w-5 mr-2 text-brand-primary"}),"Contact Information"]})}),(0,l.jsxs)(d.aY,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(v.Z,{className:"h-4 w-4 text-gray-500 mt-1"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:"Phone"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Not available"})]})]}),(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(w.Z,{className:"h-4 w-4 text-gray-500 mt-1"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:"Email"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Not available"})]})]}),(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(k.Z,{className:"h-4 w-4 text-gray-500 mt-1"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:"Website"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Not available"})]})]})]})]}),(0,l.jsxs)(d.Zb,{children:[(0,l.jsx)(d.Ol,{children:(0,l.jsxs)(d.ll,{className:"flex items-center text-lg",children:[(0,l.jsx)(Z.Z,{className:"h-5 w-5 mr-2 text-brand-primary"}),"Session Information"]})}),(0,l.jsx)(d.aY,{className:"space-y-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,l.jsx)("p",{className:"font-medium text-gray-900 mb-1",children:"Current Status"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Not checked in"})]}),(0,l.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,l.jsx)("p",{className:"font-medium text-gray-900 mb-1",children:"Last Visit"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Never"})]}),(0,l.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,l.jsx)("p",{className:"font-medium text-gray-900 mb-1",children:"Total Sessions"}),(0,l.jsx)("p",{className:"text-gray-600",children:"0"})]}),(0,l.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,l.jsx)("p",{className:"font-medium text-gray-900 mb-1",children:"Total Hours"}),(0,l.jsx)("p",{className:"text-gray-600",children:"0.0 hours"})]})]})})]}),!I&&(0,l.jsx)(d.Zb,{className:"border-amber-200 bg-amber-50",children:(0,l.jsx)(d.aY,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(j.Z,{className:"h-5 w-5 text-amber-600 mt-0.5"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-amber-900 mb-1",children:"Location Services Required"}),(0,l.jsx)("p",{className:"text-amber-800 text-sm mb-3",children:"Enable location services to see your distance from this school and enable check-in functionality."}),(0,l.jsxs)(m.z,{onClick:Y,disabled:z,size:"sm",variant:"outline",className:"border-amber-300 text-amber-900 hover:bg-amber-100",children:[z?(0,l.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-amber-600 mr-2"}):(0,l.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Enable Location"]})]})]})})}),I&&!D&&C&&(0,l.jsx)(d.Zb,{className:"status-brand border",children:(0,l.jsx)(d.aY,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(o.Z,{className:"h-5 w-5 text-brand-primary mt-0.5"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-brand-primary mb-1",children:"Move Closer to Check In"}),(0,l.jsxs)("p",{className:"text-brand-primary/80 text-sm",children:["You need to be within ",s.radius||100," meters of the school to check in. You're currently"," ",O&&L(O)," away."]})]})]})})})]})]})};const S=a(56096),I=a(7586);function z(){const[e,s]=(0,t.useState)(null),[a,c]=(0,t.useState)("list");return(0,l.jsx)(i.ProtectedRoute,{roles:["provider","admin"],children:(0,l.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,l.jsxs)(m.z,{variant:"ghost",size:"sm",onClick:()=>window.location.href="/dashboard",className:"hover:bg-gray-200",children:[(0,l.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Dashboard"]}),(0,l.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,l.jsx)(S.Z,{className:"h-6 w-6 text-brand-primary"}),(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"detail"===a&&e?e.name:"My Schools"})]}),(0,l.jsx)("p",{className:"text-gray-600",children:"detail"===a&&e?"Detailed information and check-in options":"View and manage your assigned school locations"})]}),(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,l.jsx)(o.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"list"===a?"Select a school to view details or check in":"Viewing detailed school information"})]})}),(0,l.jsx)("div",{className:"space-y-6",children:"list"===a?(0,l.jsxs)("div",{className:"grid gap-6 lg:grid-cols-1",children:[(0,l.jsx)(r.c,{onSchoolSelect:e=>{console.log("School selected for check-in:",e.name)},onSchoolDetail:e=>{s(e),c("detail")},showCheckInButtons:!0,showDetailButtons:!0,className:"lg:col-span-1"}),(0,l.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,l.jsxs)(d.Zb,{children:[(0,l.jsx)(d.Ol,{className:"pb-3",children:(0,l.jsxs)(d.ll,{className:"text-lg flex items-center",children:[(0,l.jsx)(I.Z,{className:"h-5 w-5 mr-2 text-brand-primary"}),"Quick Tips"]})}),(0,l.jsx)(d.aY,{children:(0,l.jsxs)("ul",{className:"space-y-2 text-sm text-gray-600",children:[(0,l.jsxs)("li",{className:"flex items-start gap-2",children:[(0,l.jsx)("div",{className:"w-1.5 h-1.5 bg-brand-primary rounded-full mt-2 flex-shrink-0"}),'Click "View Details" to see comprehensive school information']}),(0,l.jsxs)("li",{className:"flex items-start gap-2",children:[(0,l.jsx)("div",{className:"w-1.5 h-1.5 bg-brand-primary rounded-full mt-2 flex-shrink-0"}),"Enable location services for accurate distance calculations"]}),(0,l.jsxs)("li",{className:"flex items-start gap-2",children:[(0,l.jsx)("div",{className:"w-1.5 h-1.5 bg-brand-primary rounded-full mt-2 flex-shrink-0"}),"You must be within the check-in radius to start a session"]})]})})]}),(0,l.jsxs)(d.Zb,{children:[(0,l.jsx)(d.Ol,{className:"pb-3",children:(0,l.jsxs)(d.ll,{className:"text-lg flex items-center",children:[(0,l.jsx)(o.Z,{className:"h-5 w-5 mr-2 text-brand-primary"}),"Location Status"]})}),(0,l.jsx)(d.aY,{children:(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,l.jsx)("span",{className:"text-sm",children:"In Range - Ready to check in"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),(0,l.jsx)("span",{className:"text-sm",children:"Out of Range - Move closer"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-gray-400 rounded-full"}),(0,l.jsx)("span",{className:"text-sm",children:"Location Unknown - Enable GPS"})]})]})})]}),(0,l.jsxs)(d.Zb,{children:[(0,l.jsx)(d.Ol,{className:"pb-3",children:(0,l.jsx)(d.ll,{className:"text-lg",children:"Need Help?"})}),(0,l.jsxs)(d.aY,{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Having trouble with school locations or check-in?"}),(0,l.jsx)(m.z,{size:"sm",variant:"outline",className:"w-full",children:"Contact Support"})]})]})]})]}):e&&(0,l.jsx)(C,{school:e,onBack:()=>{s(null),c("list")},onCheckIn:e=>{console.log("Check-in initiated from detail view:",e.name)},showCheckInButton:!0,className:"bg-white rounded-lg shadow-sm border"})})]})})})}}},function(e){e.O(0,[609,15,569,806,254,304,404,246,971,208,744],function(){return e(e.s=74002)}),_N_E=e.O()}]);